<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>



const traders = [
  {
    trader: {
      name: "김철수",
      city: "대전",
    },
    year: 2023,
    value: 500000,
  },
  {
    trader: {
      name: "박영희",
      city: "서울",
    },
    year: 2022,
    value: 600000,
  },
  {
    trader: {
      name: "김철수",
      city: "대전",
    },
    year: 2022,
    value: 1200000,
  },
  {
    trader: {
      name: "박영희",
      city: "서울",
    },
    year: 2023,
    value: 650000,
  },
  {
    trader: {
      name: "뽀로로",
      city: "부산",
    },
    year: 2023,
    value: 800000,
  },
  {
    trader: {
      name: "루피",
      city: "대전",
    },
    year: 2022,
    value: 780000,
  },
];


// 연습 1: 2022년에 발생한 모든 거래를 찾아
//   거래자 정보(이름, 도시)를 배열에 매핑해주세요

// 연습 2: 거래자가 근무하는 모든 도시이름을 배열에 담아주세요.

// 연습 3: 대전에 근무하는
// 모든 거래자를 찾아 거래자정보(이름, 도시)를 배열에 매핑해주세요.

// 연습 4: 모든 거래자의 이름을 배열에 모아주세요.

// 연습 5: 서울에 사는 거래자의 모든 거래액의 총합 출력.

console.log('----연습 1----'); 
// 연습 1: 2022년에 발생한 모든 거래를 찾아 거래자 정보(이름, 도시)를 배열에 매핑해주세요
var trs = traders
.filter(u => u.year === 2022)
.map(u => u.trader)
.forEach(a => console.log(a));
// console.log(trs);



console.log('----연습 2----');
const mappedCiries = traders.map(trs => trs.trader.city);
console.log(mappedCiries);
// mappedCiries.forEach(city => console.log(city));



console.log('----연습 3----');
// 연습 3: 대전에 근무하는 모든 거래자를 찾아 거래자정보(이름, 도시)를 배열에 매핑해주세요.

traders
.filter(ct => ct.trader.city === '대전')
.map(ct => ct.trader)
.forEach(a => console.log(a));



console.log('----연습 4----');// 연습 4: 모든 거래자의 이름을 배열에 모아주세요.

const mappedNames = traders.map(u => u.trader.name);
const names = new Set(mappedNames)
console.log(names);




console.log('----연습 5----'); // 연습 5: 서울에 사는 거래자의 모든 거래액의 총합 출력.
/*
let total = 0;
traders
.filter(u => u.trader.city === '서울')
// .forEach(u => total += u.value);
.map(u => u.value)
.forEach(a => total += a);
console.log(`거래총액은 ${total}원 입니다.`);
*/



//reduce 함수: 배열을 반복해서 각 요소에 콜백함수를 적용한결과를 누적하는 함수
//     .reduce((acc   ,  curr  ) =>      acc + curr.value       ,           0      );
//array.reduce((누적값, 배열요소) => 반복해서 실행할 내용(누적연산), 누적값(acc)의 초기값);

  const total = traders
  .filter(u => u.trader.city === '서울')
  .reduce((acc, curr) => acc + curr.value, 0)

  console.log(`거래총액: ${total}원`);








  </script>
</body>
</html>
